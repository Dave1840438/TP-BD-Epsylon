CREATE TABLE GENRES (
NUMERO NUMBER PRIMARY KEY,
DESCRIPTION NVARCHAR2(50)
);

CREATE TABLE MAISONSEDITION (
NUMERO NUMBER PRIMARY KEY,
NOM NVARCHAR2(50)
);

CREATE TABLE LIVRES (
NUMERO NUMBER PRIMARY KEY,
TITRE NVARCHAR2(50),
AUTEUR NVARCHAR2(50),
GENRE NUMBER, 
DATEPARUTION DATE,
MAISONEDITION NUMBER,
CONSTRAINT FK_GENRE FOREIGN KEY (GENRE) REFERENCES GENRES(NUMERO),
CONSTRAINT FK_MAISONEDITION FOREIGN KEY (MAISONEDITION) REFERENCES MAISONSEDITION(NUMERO)
);

CREATE TABLE EXEMPLAIRES (
NUMERO NUMBER PRIMARY KEY,
LIVRE NUMBER,
CONSTRAINT FK_LIVRE FOREIGN KEY (LIVRE) REFERENCES LIVRES(NUMERO)
);

CREATE TABLE ADHERENTS (
NUMERO NUMBER PRIMARY KEY,
NOM NVARCHAR2(50),
PRENOM NVARCHAR2(50),
ADRESSE NVARCHAR2(250),
NUMEROTEL NVARCHAR2(15)
);

CREATE TABLE EMPRUNTS (
NUMEROEXEMPLAIRE NUMBER,
NUMEROADHERENT NUMBER,
DATEDEBUT DATE,
DATERETOUR DATE,
CONSTRAINT PK_COMPOSED PRIMARY KEY (NUMEROEXEMPLAIRE, NUMEROADHERENT),
CONSTRAINT FK_NUMEROEXEMPLAIRE FOREIGN KEY (NUMEROEXEMPLAIRE) REFERENCES EXEMPLAIRES(NUMERO),
CONSTRAINT FK_NUMEROADHERENT FOREIGN KEY (NUMEROADHERENT) REFERENCES ADHERENTS(NUMERO)
);

CREATE SEQUENCE SEQ_ADHERENTS START WITH 1 INCREMENT BY 1;




create or replace TRIGGER ID_ADHERENT BEFORE INSERT ON ADHERENTS
FOR EACH ROW
BEGIN

:NEW.NUMERO := SEQ_ADHERENTS.NEXTVAL;


END;